{"ast":null,"code":"import _toConsumableArray from \"/home/priya/Desktop/pdf-application/pdf-preview-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"/home/priya/Desktop/pdf-application/pdf-preview-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/priya/Desktop/pdf-application/pdf-preview-react/src/App.js\";\nimport React, { useState, useEffect } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Container, Header, Grid, Form, Popup, Item } from \"semantic-ui-react\";\nimport { Document, Page } from \"react-pdf\";\nimport \"../src/assets/styles.css\";\nimport { Draggable, Droppable } from \"react-drag-and-drop\";\nimport { Rnd } from \"react-rnd\";\nimport * as jsPDF from \"jspdf\";\nimport * as html2canvas from \"html2canvas\";\nimport styles from \"./assets/styles.css\";\nimport $ from \"jquery\";\nimport SignaturePad from \"react-signature-canvas\";\nimport { pdfjs } from \"react-pdf\";\npdfjs.GlobalWorkerOptions.workerSrc = \"//cdnjs.cloudflare.com/ajax/libs/pdf.js/\".concat(pdfjs.version, \"/pdf.worker.js\");\n\nfunction App(props) {\n  var _this = this;\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      file = _useState2[0],\n      setFile = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      trimmedDataURL = _useState4[0],\n      setTrimmedDataURL = _useState4[1];\n\n  var _useState5 = useState(),\n      _useState6 = _slicedToArray(_useState5, 2),\n      usertext = _useState6[0],\n      setUsername = _useState6[1];\n\n  var _useState7 = useState(),\n      _useState8 = _slicedToArray(_useState7, 2),\n      date = _useState8[0],\n      setDate = _useState8[1];\n\n  var _useState9 = useState(false),\n      _useState10 = _slicedToArray(_useState9, 2),\n      showtext = _useState10[0],\n      toggleShowtext = _useState10[1];\n\n  var _useState11 = useState(false),\n      _useState12 = _slicedToArray(_useState11, 2),\n      showPopup = _useState12[0],\n      setShowPopup = _useState12[1];\n\n  var _useState13 = useState(true),\n      _useState14 = _slicedToArray(_useState13, 2),\n      showDate = _useState14[0],\n      setShowDate = _useState14[1];\n\n  var _React$useState = React.useState([]),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      dragitem = _React$useState2[0],\n      setDragitem = _React$useState2[1];\n\n  var _React$useState3 = React.useState([]),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      Pagelist = _React$useState4[0],\n      setPagelist = _React$useState4[1];\n\n  var _useState15 = useState(false),\n      _useState16 = _slicedToArray(_useState15, 2),\n      continuebutton = _useState16[0],\n      setContinuebutton = _useState16[1];\n\n  var toggleContinue = function toggleContinue() {\n    setContinuebutton(!continuebutton);\n  };\n\n  useEffect(function () {\n    useDate();\n  });\n\n  var useDate = function useDate() {\n    var current_datetime = new Date();\n    var date = current_datetime.getDate() + \"-\" + (current_datetime.getMonth() + 1) + \"-\" + current_datetime.getFullYear();\n    setDate(date);\n  };\n\n  var myChangeHandler = function myChangeHandler(event) {\n    setUsername(event.target.value);\n  };\n\n  var toggleText = function toggleText(e) {\n    toggleShowtext(!showtext);\n  };\n\n  var sigPad = {};\n\n  var clear = function clear() {\n    sigPad.clear();\n  };\n\n  var trim = function trim() {\n    setTrimmedDataURL(sigPad.getTrimmedCanvas().toDataURL(\"image/png\"));\n    setShowPopup(!showPopup);\n  };\n\n  var togglePopup = function togglePopup() {\n    if (trimmedDataURL === null) {\n      setShowPopup(!showPopup);\n    }\n  };\n\n  var onFileChange = function onFileChange(event) {\n    setFile(event.target.files[0]);\n  };\n\n  var onDocumentLoadSuccess = function onDocumentLoadSuccess(numPages, i) {\n    var j = numPages.numPages;\n    var item = \"\";\n\n    for (i = 0; i < j; i++) {\n      item += i + \" \";\n    }\n\n    var n = item;\n    var numStringArr = \"\".concat(n).split(\"\").map(function (el) {\n      return parseInt(el);\n    });\n    var numStringArrs = numStringArr.filter(function (e) {\n      return e === 0 || e;\n    });\n    setPagelist(numStringArrs);\n  };\n\n  var handlePdf = function handlePdf() {\n    var canvas_data = document.getElementsByTagName(\"canvas\");\n    var HTML_Width = canvas_data.item(0).width;\n    var HTML_Height = canvas_data.item(0).height;\n    var top_left_margin = 5;\n    var PDF_Width = HTML_Width + top_left_margin * 2;\n    var PDF_Height = PDF_Width * 1.5 + top_left_margin * 2;\n    var canvas_image_width = HTML_Width;\n    var canvas_image_height = HTML_Height;\n    var totalPDFPages = Math.ceil(HTML_Height / PDF_Height) - 1;\n    html2canvas($(\".canvas_div_pdf\")[0]).then(function (canvas) {\n      canvas.getContext(\"2d\");\n      var imgData = canvas.toDataURL(\"image/jpeg\", 1.0);\n      var pdf = new jsPDF(\"p\", \"pt\", [PDF_Width, PDF_Height]);\n      pdf.addImage(imgData, \"JPG\", top_left_margin, top_left_margin, canvas_image_width, canvas_image_height);\n\n      for (var i = 1; i <= totalPDFPages; i++) {\n        pdf.addPage(PDF_Width, PDF_Height);\n        pdf.addImage(imgData, \"JPG\", top_left_margin, -(PDF_Height * i) + top_left_margin * 4, canvas_image_width, canvas_image_height);\n      }\n\n      pdf.save(\"Doc.pdf\");\n      $(\".canvas_div_pdf\").hide();\n    });\n  };\n\n  var onDrop = React.useCallback(function (result, e) {\n    var target = e.target || e.srcElement;\n    var rect = target.getBoundingClientRect();\n\n    var newArray = _toConsumableArray(dragitem);\n\n    var newObject = {\n      dragitems: result.dragitems,\n      position: {\n        x: e.clientX - rect.left,\n        y: e.clientY - rect.top\n      }\n    };\n    newArray.push(newObject);\n    setDragitem(newArray);\n  });\n\n  function handleDrag(ui, index) {\n    var item = dragitem;\n  }\n\n  var handleMouseDown = function handleMouseDown(e) {};\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 7\n    }\n  }, !continuebutton && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sidenav\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Draggable, {\n    type: \"dragitems\",\n    data: \"Signature\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 15\n    }\n  }, \"Signature\")), /*#__PURE__*/React.createElement(Draggable, {\n    type: \"dragitems\",\n    data: \"Intital\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 15\n    }\n  }, \"Initial\")), /*#__PURE__*/React.createElement(Draggable, {\n    type: \"dragitems\",\n    data: \"Date\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 15\n    }\n  }, \"Date\"))), continuebutton && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sidenav\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"text-sidebar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 13\n    }\n  }, \"Pdf Preview\"), showPopup && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"Apps\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(SignaturePad, {\n    canvasProps: {\n      width: 500,\n      height: 200,\n      className: \"sigCanvas\"\n    },\n    ref: function ref(_ref) {\n      sigPad = _ref;\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-primary btn-lg mx-auto\",\n    onClick: clear,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 21\n    }\n  }, \"Clear\", \" \"), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-primary btn-lg mx-auto\",\n    onClick: trim,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 21\n    }\n  }, \"Save\")))), showtext && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"Apps\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    maxlength: \"3\",\n    placeholder: \"Mr/Mrs\",\n    onChange: function onChange(e) {\n      return myChangeHandler(e);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-primary btn-lg mx-auto\",\n    type: \"submit\",\n    onClick: function onClick() {\n      return toggleText();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 19\n    }\n  }, \"Close\", \" \")))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"main container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Droppable, {\n    types: [\"dragitems\"],\n    onDrop: onDrop,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"add-background\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 17\n    }\n  }, continuebutton && /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handlePdf,\n    className: \"btn btn-primary btn-lg mx-auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 21\n    }\n  }, \"Generate PDF\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-6 rightbutton\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 17\n    }\n  }, !continuebutton && /*#__PURE__*/React.createElement(\"button\", {\n    onClick: toggleContinue,\n    className: \"btn btn-primary btn-lg mx-auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 21\n    }\n  }, \"Continue\"))), !continuebutton && /*#__PURE__*/React.createElement(Form, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"upload-btn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    onChange: onFileChange,\n    className: \"button-select\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 21\n    }\n  }))), continuebutton && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"items-pdf\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"canvas_div_pdf\",\n    id: \"page\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Document, {\n    file: file,\n    onLoadSuccess: onDocumentLoadSuccess,\n    noData: /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"success-file\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 23\n      }\n    }, !continuebutton && /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 45\n      }\n    }, \" Please select a file\")),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 279,\n      columnNumber: 19\n    }\n  }, Pagelist.map(function (page) {\n    return /*#__PURE__*/React.createElement(Page, {\n      pageNumber: page,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 23\n      }\n    });\n  })), dragitem.map(function (item) {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Rnd, {\n      onDragStop: function onDragStop(e, ui) {\n        return handleDrag(ui);\n      },\n      onMouseDown: handleMouseDown,\n      default: {\n        x: item.position.x,\n        y: item.position.y\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 296,\n        columnNumber: 25\n      }\n    }, !continuebutton && /*#__PURE__*/React.createElement(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 308,\n        columnNumber: 29\n      }\n    }, item.dragitems == \"Signature\" ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"items\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 33\n      }\n    }, item.dragitems) : null), continuebutton && /*#__PURE__*/React.createElement(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 316,\n        columnNumber: 29\n      }\n    }, item.dragitems == \"Signature\" ? /*#__PURE__*/React.createElement(\"div\", {\n      onClick: function onClick() {\n        return togglePopup();\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 318,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 319,\n        columnNumber: 35\n      }\n    }, trimmedDataURL ? /*#__PURE__*/React.createElement(\"img\", {\n      className: styles.sigImage,\n      src: trimmedDataURL,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 321,\n        columnNumber: 39\n      }\n    }) : /*#__PURE__*/React.createElement(\"div\", {\n      className: \"items\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 326,\n        columnNumber: 41\n      }\n    }, item.dragitems))) : null), !continuebutton && /*#__PURE__*/React.createElement(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 337,\n        columnNumber: 29\n      }\n    }, item.dragitems == \"Intital\" ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"items\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 339,\n        columnNumber: 33\n      }\n    }, item.dragitems) : null), continuebutton && /*#__PURE__*/React.createElement(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 345,\n        columnNumber: 29\n      }\n    }, item.dragitems == \"Intital\" && /*#__PURE__*/React.createElement(\"div\", {\n      onClick: function onClick() {\n        return toggleText();\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 347,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 348,\n        columnNumber: 35\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"items\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 349,\n        columnNumber: 37\n      }\n    }, usertext ? usertext : item.dragitems)))), !continuebutton && /*#__PURE__*/React.createElement(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 359,\n        columnNumber: 29\n      }\n    }, item.dragitems == \"Date\" ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"items\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 361,\n        columnNumber: 33\n      }\n    }, item.dragitems) : null), continuebutton && /*#__PURE__*/React.createElement(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 367,\n        columnNumber: 29\n      }\n    }, item.dragitems == \"Date\" && /*#__PURE__*/React.createElement(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 369,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 370,\n        columnNumber: 35\n      }\n    }, showDate && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"items\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 372,\n        columnNumber: 39\n      }\n    }, date))))));\n  }))))))));\n}\n\nReactDOM.render( /*#__PURE__*/React.createElement(App, {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 393,\n    columnNumber: 17\n  }\n}), document.getElementById(\"root\"));","map":{"version":3,"sources":["/home/priya/Desktop/pdf-application/pdf-preview-react/src/App.js"],"names":["React","useState","useEffect","ReactDOM","Container","Header","Grid","Form","Popup","Item","Document","Page","Draggable","Droppable","Rnd","jsPDF","html2canvas","styles","$","SignaturePad","pdfjs","GlobalWorkerOptions","workerSrc","version","App","props","file","setFile","trimmedDataURL","setTrimmedDataURL","usertext","setUsername","date","setDate","showtext","toggleShowtext","showPopup","setShowPopup","showDate","setShowDate","dragitem","setDragitem","Pagelist","setPagelist","continuebutton","setContinuebutton","toggleContinue","useDate","current_datetime","Date","getDate","getMonth","getFullYear","myChangeHandler","event","target","value","toggleText","e","sigPad","clear","trim","getTrimmedCanvas","toDataURL","togglePopup","onFileChange","files","onDocumentLoadSuccess","numPages","i","j","item","n","numStringArr","split","map","el","parseInt","numStringArrs","filter","handlePdf","canvas_data","document","getElementsByTagName","HTML_Width","width","HTML_Height","height","top_left_margin","PDF_Width","PDF_Height","canvas_image_width","canvas_image_height","totalPDFPages","Math","ceil","then","canvas","getContext","imgData","pdf","addImage","addPage","save","hide","onDrop","useCallback","result","srcElement","rect","getBoundingClientRect","newArray","newObject","dragitems","position","x","clientX","left","y","clientY","top","push","handleDrag","ui","index","handleMouseDown","className","ref","page","sigImage","render","getElementById"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Container, Header, Grid, Form, Popup, Item } from \"semantic-ui-react\";\nimport { Document, Page } from \"react-pdf\";\nimport \"../src/assets/styles.css\";\nimport { Draggable, Droppable } from \"react-drag-and-drop\";\nimport { Rnd } from \"react-rnd\";\nimport * as jsPDF from \"jspdf\";\nimport * as html2canvas from \"html2canvas\";\nimport styles from \"./assets/styles.css\";\nimport $ from \"jquery\";\nimport SignaturePad from \"react-signature-canvas\";\nimport { pdfjs } from \"react-pdf\";\n\npdfjs.GlobalWorkerOptions.workerSrc = `//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjs.version}/pdf.worker.js`;\n\nfunction App(props) {\n  const [file, setFile] = useState(null);\n  const [trimmedDataURL, setTrimmedDataURL] = useState(null);\n  const [usertext, setUsername] = useState();\n  const [date, setDate] = useState();\n  const [showtext, toggleShowtext] = useState(false);\n  const [showPopup, setShowPopup] = useState(false);\n  const [showDate, setShowDate] = useState(true);\n  const [dragitem, setDragitem] = React.useState([]);\n  const [Pagelist, setPagelist] = React.useState([]);\n  const [continuebutton, setContinuebutton] = useState(false);\n\n  const toggleContinue = () => {\n    setContinuebutton(!continuebutton);\n  };\n\n  useEffect(() => {\n    useDate();\n  });\n\n  const useDate = () => {\n    let current_datetime = new Date()\n    let date = current_datetime.getDate() + \"-\" + (current_datetime.getMonth() + 1) + \"-\" + current_datetime.getFullYear()\n    setDate(date);\n  };\n\n  const myChangeHandler = (event) => {\n    setUsername(event.target.value);\n  };\n\n  const toggleText = (e) => {\n    toggleShowtext(!showtext);\n  };\n\n  var sigPad = {};\n\n  const clear = () => {\n    sigPad.clear();\n  };\n\n  const trim = () => {\n    setTrimmedDataURL(sigPad.getTrimmedCanvas().toDataURL(\"image/png\"));\n    setShowPopup(!showPopup);\n  };\n\n  const togglePopup = () => {\n    if (trimmedDataURL === null) {\n      setShowPopup(!showPopup);\n    }\n  };\n\n  const onFileChange = (event) => {\n    setFile(event.target.files[0]);\n  };\n\n  const onDocumentLoadSuccess = (numPages, i) => {\n    var j = numPages.numPages;\n    var item = \"\";\n    for (i = 0; i < j; i++) {\n      item += i + \" \";\n    }\n    var n = item;\n    let numStringArr = `${n}`.split(\"\").map((el) => parseInt(el));\n    var numStringArrs = numStringArr.filter((e) => e === 0 || e);\n    setPagelist(numStringArrs);\n  };\n\n  const handlePdf = () => {\n    var canvas_data = document.getElementsByTagName(\"canvas\");\n    var HTML_Width = canvas_data.item(0).width\n    var HTML_Height = canvas_data.item(0).height\n\n \n    \n    var top_left_margin = 5;\n    var PDF_Width = HTML_Width + top_left_margin * 2;\n    var PDF_Height = PDF_Width * 1.5 + top_left_margin * 2;\n    var canvas_image_width = HTML_Width;\n    var canvas_image_height = HTML_Height;\n\n    var totalPDFPages = Math.ceil(HTML_Height / PDF_Height) - 1;\n\n    html2canvas($(\".canvas_div_pdf\")[0]).then(function (canvas) {\n      canvas.getContext(\"2d\");\n\n      var imgData = canvas.toDataURL(\"image/jpeg\", 1.0);\n      var pdf = new jsPDF(\"p\", \"pt\", [PDF_Width, PDF_Height]);\n      pdf.addImage(\n        imgData,\n        \"JPG\",\n        top_left_margin,\n        top_left_margin,\n        canvas_image_width,\n        canvas_image_height\n      );\n      for (var i = 1; i <= totalPDFPages; i++) {\n        pdf.addPage(PDF_Width, PDF_Height);\n        pdf.addImage(\n          imgData,\n          \"JPG\",\n          top_left_margin,\n          -(PDF_Height * i) + top_left_margin * 4,\n          canvas_image_width,\n          canvas_image_height\n        );\n      }\n      pdf.save(\"Doc.pdf\");\n      $(\".canvas_div_pdf\").hide();\n    });\n  };\n\n\n  const onDrop = React.useCallback((result,e) => {\n\n    var target = e.target || e.srcElement\n    var rect = target.getBoundingClientRect()\n    let newArray = [...dragitem];\n    let newObject = {\n      dragitems : result.dragitems,\n      position : {x :  e.clientX - rect.left , y : e.clientY - rect.top}\n    }\n\n    newArray.push(newObject);\n\n    setDragitem(newArray);\n\n  });\n\n  function handleDrag(ui, index) {\n    let item = dragitem;\n  }\n\n  const handleMouseDown = (e) => {\n  };\n\n  return (\n    <div>\n      <div>\n        {!continuebutton && (\n          <div className=\"sidenav\">\n            <Draggable type=\"dragitems\" data=\"Signature\">\n              <a>Signature</a>\n            </Draggable>\n            <Draggable type=\"dragitems\" data=\"Intital\">\n              <a>Initial</a>\n            </Draggable>\n            <Draggable type=\"dragitems\" data=\"Date\">\n              <a>Date</a>\n            </Draggable>\n          </div>\n        )}\n\n\n\n        {continuebutton && (\n          <div className=\"sidenav\">\n            <p className=\"text-sidebar\">Pdf Preview</p>\n\n            {showPopup && (\n              <div className=\"Apps\">\n                <div>\n                  <div>\n                    <SignaturePad\n                      canvasProps={{\n                        width: 500,\n                        height: 200,\n                        className: \"sigCanvas\",\n                      }}\n                      ref={(ref) => {\n                        sigPad = ref;\n                      }}\n                    />\n                  </div>\n                  <div>\n                    <button\n                      className=\"btn btn-primary btn-lg mx-auto\"\n                      onClick={clear}\n                    >\n                      Clear{\" \"}\n                    </button>\n                    <button\n                      className=\"btn btn-primary btn-lg mx-auto\"\n                      onClick={trim}\n                    >\n                      Save\n                      </button>\n                  </div>\n                </div>\n              </div>\n            )}\n\n            {showtext && (\n              <div className=\"Apps\">\n                <form>\n                  <input\n                    type=\"text\"\n                    maxlength=\"3\"\n                    placeholder=\"Mr/Mrs\"\n                    onChange={(e) => myChangeHandler(e)}\n                  />\n                  <button\n                    className=\"btn btn-primary btn-lg mx-auto\"\n                    type=\"submit\"\n                    onClick={() => toggleText()}\n                  >\n                    Close{\" \"}\n                  </button>\n                </form>\n              </div>\n            )}\n\n          </div>\n        )}\n\n\n        <div className=\"main container\">\n          <Droppable types={[\"dragitems\"]} onDrop={onDrop}>\n            <div className=\"add-background\">\n              <div className=\"row\">\n                <div className=\"col-md-6\">\n                  {continuebutton && (\n                    <button\n                      onClick={handlePdf}\n                      className=\"btn btn-primary btn-lg mx-auto\"\n                    >\n                      Generate PDF\n                    </button>\n                  )}\n                </div>\n\n                <div className=\"col-md-6 rightbutton\">\n                  {!continuebutton && (\n                    <button\n                      onClick={toggleContinue}\n                      className=\"btn btn-primary btn-lg mx-auto\"\n                    >\n                      Continue\n                    </button>\n                  )}\n                </div>\n              </div>\n\n              {/* all-popup */}\n\n              {!continuebutton && (\n                <Form>\n                  <div className=\"upload-btn\">\n                    <input\n                      type=\"file\"\n                      onChange={onFileChange}\n                      className=\"button-select\"\n                    ></input>\n                  </div>\n                </Form>\n              )}\n\n              {continuebutton && (\n                <div className=\"items-pdf\"></div>\n              )}\n\n              <div className=\"container\">\n                <div className=\"canvas_div_pdf\" id=\"page\">\n                  <Document\n                    file={file}\n                    onLoadSuccess={onDocumentLoadSuccess}\n                    noData={\n                      <h4 className=\"success-file\">\n                        {!continuebutton && <p> Please select a file</p>}\n                      </h4>\n                    }\n                  >\n                    {Pagelist.map((page) => (\n                      <Page pageNumber={page} />\n                    ))}\n                  </Document>\n\n                  {dragitem.map((item) => {\n                    return (\n                      <>\n                        <Rnd\n                          onDragStop={(e, ui) => handleDrag(ui)}\n                          onMouseDown={handleMouseDown}\n                          default={{\n                            x: item.position.x,\n                            y: item.position.y,\n                          \n                          }}\n                        >\n                          {/* signature */}\n\n                          {!continuebutton && (\n                            <div>\n                              {item.dragitems == \"Signature\" ? (\n                                <div className=\"items\">{item.dragitems}</div>\n                              ) : null}\n                            </div>\n                          )}\n\n                          {continuebutton && (\n                            <div>\n                              {item.dragitems == \"Signature\" ? (\n                                <div onClick={() => togglePopup()}>\n                                  <div>\n                                    {trimmedDataURL ? (\n                                      <img\n                                        className={styles.sigImage}\n                                        src={trimmedDataURL}\n                                      />\n                                    ) : (\n                                        <div className=\"items\">\n                                          {item.dragitems}\n                                        </div>\n                                      )}\n                                  </div>\n                                </div>\n                              ) : null}\n                            </div>\n                          )}\n\n                          {!continuebutton && (\n                            <div>\n                              {item.dragitems == \"Intital\" ? (\n                                <div className=\"items\">{item.dragitems}</div>\n                              ) : null}\n                            </div>\n                          )}\n\n                          {continuebutton && (\n                            <div>\n                              {item.dragitems == \"Intital\" && (\n                                <div onClick={() => toggleText()}>\n                                  <div>\n                                    <div className=\"items\">\n                                      {usertext ? usertext : item.dragitems}\n                                    </div>\n                                  </div>\n                                </div>\n                              )}\n                            </div>\n                          )}\n\n                          {!continuebutton && (\n                            <div>\n                              {item.dragitems == \"Date\" ? (\n                                <div className=\"items\">{item.dragitems}</div>\n                              ) : null}\n                            </div>\n                          )}\n\n                          {continuebutton && (\n                            <div>\n                              {item.dragitems == \"Date\" && (\n                                <div >\n                                  <div>\n                                    {showDate && (\n                                      <div className=\"items\">{date}</div>\n                                    )}\n                                  </div>\n                                </div>\n                              )}\n                            </div>\n                          )}\n                        </Rnd>\n                      </>\n                    );\n                  })}\n                </div>\n              </div>\n            </div>\n          </Droppable>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"]},"metadata":{},"sourceType":"module"}